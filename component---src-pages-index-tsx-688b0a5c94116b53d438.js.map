{"version":3,"sources":["webpack:///./src/pages/index.tsx"],"names":["IndexPage","props","_this","_React$Component","call","this","toggleMenu","menuToggled","state","setState","handleScroll","attractionsRef","current","photosRef","reviewsRef","_this$state","showAttractions","showPhotos","showReviews","hasReachedShowAttractions","window","scrollY","getBoundingClientRect","top","hasReachedShowPhotos","hasReachedShowReviews","React","createRef","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","_this$state2","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","_components__WEBPACK_IMPORTED_MODULE_5__","handleToggle","showModal","Fragment","className","styles","filename","imgStyle","filter","style","height","CMS","landingTitle","landingSubtitle","antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default","type","shape","size","gatsby__WEBPACK_IMPORTED_MODULE_3__","to","exploreBtn","ghost","contactBtn","show","htmlRef","Component"],"mappings":"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","file":"component---src-pages-index-tsx-688b0a5c94116b53d438.js","sourcesContent":["import React from \"react\"\nimport { Button } from 'antd';\nimport { Link } from \"gatsby\"\nimport * as styles from \"./index.module.scss\";\n\nimport { Attractions, Layout, Image, Navbar, Modal, Photos, Reviews, Footer } from \"../components\";\nimport { post } from \"../helpers\";\nimport CMS from \"../../content/homepageCMS.json\";\n\nclass IndexPage extends React.Component<any, any> {  \n  private attractionsRef: React.RefObject<HTMLDivElement>;\n  private photosRef: React.RefObject<HTMLDivElement>;\n  private reviewsRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      menuToggled: false,\n      showAttractions: false,\n      showPhotos: false,\n      showReviews: false,\n    }\n\n    this.attractionsRef = React.createRef();\n    this.photosRef = React.createRef();\n    this.reviewsRef = React.createRef();\n  }\n\n  toggleMenu = () => {\n    const { menuToggled } = this.state;\n\n    this.setState({\n      menuToggled: !menuToggled\n    })\n  }\n\n  handleScroll = () => {\n    const attractionsRef = this.attractionsRef.current;\n    const photosRef = this.photosRef.current;\n    const reviewsRef = this.reviewsRef.current;\n\n    if (!attractionsRef || !photosRef || !reviewsRef ) { return; }\n\n    const { showAttractions, showPhotos, showReviews } = this.state;\n\n    const hasReachedShowAttractions = (window.scrollY + attractionsRef.getBoundingClientRect().top) / 3 < window.scrollY;\n    const hasReachedShowPhotos = (window.scrollY + photosRef.getBoundingClientRect().top) / 2 < window.scrollY;\n    const hasReachedShowReviews = (window.scrollY + reviewsRef.getBoundingClientRect().top) / 2 < window.scrollY;\n\n    if (showAttractions !== hasReachedShowAttractions) {\n      this.setState({ showAttractions: hasReachedShowAttractions });\n    }\n\n    if (showPhotos !== hasReachedShowPhotos) {\n      this.setState({ showPhotos: hasReachedShowPhotos });\n    }\n\n    if (showReviews !== hasReachedShowReviews) {\n      this.setState({ showReviews: hasReachedShowReviews });\n    }\n  }\n\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('scroll', this.handleScroll);\n    }    \n  }\n\n  // fetchAvailabilities = async () => {    \n  //   const data = { \n  //     listing_id: \"39097100\",\n  //     month: \"12\",\n  //     year: \"2020\",\n  //     count: \"3\"\n  //   }\n\n  //   const res = await (await post(\"/api/availabilities\", data, {})).json();\n\n  //   console.log(res);\n  // }\n\n  componentWillUnmount() {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('scroll', this.handleScroll);\n    }\n  }\n\n  render() {\n    const { menuToggled, showAttractions, showPhotos, showReviews } = this.state;\n\n    return (\n      <Layout>\n          <Navbar menuToggled={menuToggled} handleToggle={this.toggleMenu}/>      \n          <Modal showModal={menuToggled} />\n          {!menuToggled &&\n            <>\n              <div className={styles.introContainer}>          \n                <Image filename=\"palm-trees1.png\" imgStyle={{ filter: 'brightness(0.5)'}} style={{ height: '100vh' }}/> \n                <div className={styles.introContainer_main}>\n                  <h1 className={styles.introContainer_title}>{CMS.landingTitle}</h1>\n                  <p className={styles.introContainer_subtitle}>{CMS.landingSubtitle}</p>\n                  <div className={styles.introContainer_buttons}>\n                    <Button type=\"primary\" shape=\"round\" size=\"large\"><Link to=\"/apartments\">{CMS.exploreBtn}</Link></Button>\n                    <Button ghost shape=\"round\" size=\"large\"><Link to=\"/contact\">{CMS.contactBtn}</Link></Button>\n                    {/* <Button type=\"primary\" shape=\"round\" size=\"large\" onClick={this.fetchAvailabilities}>Test</Button> */}\n                  </div>\n                </div>\n              </div>\n              <Attractions show={showAttractions} htmlRef={this.attractionsRef}/>\n              <Photos show={showPhotos} htmlRef={this.photosRef}/>\n              <Reviews show={showReviews} htmlRef={this.reviewsRef}/>\n              <Footer />\n            </>\n          } \n      </Layout>\n    )\n  }\n}\n\nexport default IndexPage\n"],"sourceRoot":""}